<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>浅析Java中的final关键字 | Andone1cc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="浅析Java中的final关键字谈到final关键字，想必很多人都不陌生，在使用匿名内部类的时候可能会经常用到final关键字。另外，Java中的String类就是一个final类，那么今天我们就来了解final这个关键字的用法。">
<meta property="og:type" content="article">
<meta property="og:title" content="浅析Java中的final关键字">
<meta property="og:url" content="http://yoursite.com/2016/11/06/java基础/final关键字/index.html">
<meta property="og:site_name" content="Andone1cc">
<meta property="og:description" content="浅析Java中的final关键字谈到final关键字，想必很多人都不陌生，在使用匿名内部类的时候可能会经常用到final关键字。另外，Java中的String类就是一个final类，那么今天我们就来了解final这个关键字的用法。">
<meta property="og:image" content="http://images.cnitblog.com/i/288799/201407/091032249893721.jpg">
<meta property="og:image" content="http://images.cnitblog.com/i/288799/201407/091114508325258.jpg">
<meta property="og:updated_time" content="2016-11-02T14:56:52.202Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浅析Java中的final关键字">
<meta name="twitter:description" content="浅析Java中的final关键字谈到final关键字，想必很多人都不陌生，在使用匿名内部类的时候可能会经常用到final关键字。另外，Java中的String类就是一个final类，那么今天我们就来了解final这个关键字的用法。">
<meta name="twitter:image" content="http://images.cnitblog.com/i/288799/201407/091032249893721.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Andone1cc" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">Andone1cc</h1>
  
    <p class="lead blog-description">一个有梦想的CS小白</p>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-java基础/final关键字" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      浅析Java中的final关键字
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/11/06/java基础/final关键字/" class="article-date"><time datetime="2016-11-06T14:17:46.616Z" itemprop="datePublished">2016-11-06</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JAVA/">JAVA</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="浅析Java中的final关键字"><a href="#浅析Java中的final关键字" class="headerlink" title="浅析Java中的final关键字"></a>浅析Java中的final关键字</h3><p>谈到final关键字，想必很多人都不陌生，在使用匿名内部类的时候可能会经常用到final关键字。另外，Java中的String类就是一个final类，那么今天我们就来了解final这个关键字的用法。</p>
<a id="more"></a>
<h3 id="一、final关键字的基本用法"><a href="#一、final关键字的基本用法" class="headerlink" title="一、final关键字的基本用法"></a>一、final关键字的基本用法</h3><p>在Java中，final关键字可以用来修饰类、方法和变量（包括成员变量和局部变量）。下面就从这三个方面来了解一下final关键字的基本用法。</p>
<p>1.修饰类</p>
<p>当用final修饰一个类时,<code>表明这个类不能被继承。</code>也就是说，如果一个类你永远不会让他被继承，就可以用final进行修饰。final类中的成员变量可以根据需要设为final，但是要注意final类中的所有成员方法都会被隐式地指定为final方法。</p>
<p><img src="http://images.cnitblog.com/i/288799/201407/091032249893721.jpg" alt=""></p>
<p><code>在使用final修饰类的时候，要注意谨慎选择，除非这个类真的在以后不会用来继承或者出于安全的考虑，尽量不要将类设计为final类。</code></p>
<p>2.修饰方法</p>
<p>当用final修饰一个方法时,<code>表明这个方法不能被重写。</code></p>
<p>下面这段话摘自《Java编程思想》第四版第143页：</p>
<blockquote>
<p>　“使用final方法的原因有两个。第一个原因是把方法锁定，以防任何继承类修改它的含义；第二个原因是效率。在早期的Java实现版本中，会将final方法转为内嵌调用。但是如果方法过于庞大，可能看不到内嵌调用带来的任何性能提升。在最近的Java版本中，不需要使用final方法进行这些优化了。“</p>
</blockquote>
<p>因此，如果只有在想明确禁止 该方法在子类中被覆盖的情况下才将方法设置为final的。</p>
<p><code>注：类的private方法会隐式地被指定为final方法。</code></p>
<p>3.修饰变量</p>
<p>修饰变量是final用得最多的地方，也是本文接下来要重点阐述的内容。首先了解一下final变量的基本语法：</p>
<p><code>对于一个final变量，如果是基本数据类型的变量，则其数值一旦在初始化之后便不能更改；如果是引用类型的变量，则在对其初始化之后便不能再让其指向另一个对象。</code></p>
<p>举个例子：</p>
<p><img src="http://images.cnitblog.com/i/288799/201407/091114508325258.jpg" alt=""></p>
<p>上面的一段代码中，对变量i和obj的重新赋值都报错了。</p>
<h3 id="二、深入理解final关键字"><a href="#二、深入理解final关键字" class="headerlink" title="二、深入理解final关键字"></a>二、深入理解final关键字</h3><p>1.类的final变量和普通变量有什么区别？</p>
<p>当用final作用于类的成员变量时，成员变量（注意是类的成员变量，局部变量只需要保证在使用之前被初始化赋值即可）必须在定义时或者构造器中进行初始化赋值，而且final变量一旦被初始化赋值之后，就不能再被赋值了。</p>
<p>那么final变量和普通变量到底有何区别呢？下面请看一个例子：</p>
<pre><code>`public class Test {
    public static void main(String[] args)  {
        String a = &quot;hello2&quot;; 
        final String b = &quot;hello&quot;;
        String d = &quot;hello&quot;;
        String c = b + 2; 
        String e = d + 2;
        System.out.println((a == c));
        System.out.println((a == e));
    }
}`
</code></pre><p>输出结果：<code>true false</code></p>
<p>大家可以先想一下这道题的输出结果。为什么第一个比较结果为true，而第二个比较结果为fasle。这里面就是final变量和普通变量的区别了，当final变量是基本数据类型以及String类型时，如果在编译期间能知道它的确切值，则编译器会把它当做编译期常量使用。也就是说在用到该final变量的地方，相当于直接访问的这个常量，不需要在运行时确定。这种和C语言中的宏替换有点像。因此在上面的一段代码中，由于变量b被final修饰，因此会被当做编译器常量，所以在使用到b的地方会直接将变量b 替换为它的  值。而对于变量d的访问却需要在运行时通过链接来进行。想必其中的区别大家应该明白了，不过要注意，只有在编译期间能确切知道final变量值的情况下，编译器才会进行这样的优化，比如下面的这段代码就不会进行优化：</p>
<pre><code>`public class Test {
    public static void main(String[] args)  {
        String a = &quot;hello2&quot;; 
        final String b = getHello();
        String c = b + 2; 
        System.out.println((a == c));

    }

    public static String getHello() {
        return &quot;hello&quot;;
    }
}`
</code></pre><p>这段代码的输出结果为false。</p>
<p>2.被final修饰的引用变量指向的对象内容可变吗？</p>
<p>在上面提到被final修饰的引用变量一旦初始化赋值之后就不能再指向其他的对象，那么该引用变量指向的对象的内容可变吗？看下面这个例子：</p>
<pre><code>`public class Test {
    public static void main(String[] args)  {
        final MyClass myClass = new MyClass();
        System.out.println(++myClass.i);

    }
}

class MyClass {
    public int i = 0;
}`
</code></pre><p>这段代码可以顺利编译通过并且有输出结果，输出结果为1。<code>这说明引用变量被final修饰之后，虽然不能再指向其他对象，但是它指向的对象的内容是可变的。</code></p>
<p>3.final和static</p>
<p>很多时候会容易把static和final关键字混淆，static作用于成员变量用来表示只保存一份副本，而final的作用是用来保证变量不可变。看下面这个例子：</p>
<pre><code>`public class Test {
    public static void main(String[] args)  {
        MyClass myClass1 = new MyClass();
        MyClass myClass2 = new MyClass();
        System.out.println(myClass1.i);
           System.out.println(myClass1.j);
        System.out.println(myClass2.i);
        System.out.println(myClass2.j);

    }
}

class MyClass {
    public final double i = Math.random();
    public static double j = Math.random();
}`
</code></pre><p>运行这段代码就会发现，每次打印的两个j值都是一样的，而i的值却是不同的。从这里就可以知道final和static变量的区别了。</p>
<p><code>匿名内部类中使用的外部局部变量只能是final变量。</code></p>
<p>4.关于fianl参数的问题</p>
<p>使用final修饰方法参数的目的是防止修改这个参数的值，同时也是一种声明和约定，强调这个参数是不可变的。并不会防止修改调用方法外变量的值。</p>
<p><br><br>【参考资料】</p>
<p>《Java编程思想》</p>
<p><a href="http://www.cnblogs.com/dolphin0520/" target="_blank" rel="external">http://www.cnblogs.com/dolphin0520/</a></p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/06/java基础/final关键字/" data-id="ciw26pff5000aikn6rvwqj7yu" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java基础/">java基础</a></li></ul>


    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/2016/11/06/java基础/equals/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">浅谈Java中的equals和==</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/2016/11/06/java基础/Integer方法之惑/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">Integer.valueOf(String) 方法之惑</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>


<section id="comments">
<!-- ��˵���ۿ� start -->
<div class="ds-thread" data-thread-key="post-java基础/final关键字" data-title="浅析Java中的final关键字" data-url="http://yoursite.com/2016/11/06/java基础/final关键字/"></div>
<!-- ��˵���ۿ� end -->
<!-- ��˵����JS���� start (һ����ҳֻ������һ��) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:'andone1cc'};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- ��˵����JS���� end -->
</section>



        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p><em>青岛大学   计算机</em><br /> Algorithm JAVA C/C++ Python <br />有些事不是看到希望了才去坚持,而是坚持了才会看到希望..</p>

</div>


  
  <div class="sidebar-module">
    <h4>Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/Algorithm/">Algorithm</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/JAVA/">JAVA</a><span class="sidebar-module-list-count">15</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/java高级/">java高级</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/设计模式/">设计模式</a><span class="sidebar-module-list-count">2</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/JVM的核心机制/">JVM的核心机制</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/SSH/">SSH</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/String/">String</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ajax/">ajax</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/java基础/">java基础</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/二叉树/">二叉树</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/设计模式/">设计模式</a><span class="sidebar-module-list-count">2</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/11/">十一月 2016</a><span class="sidebar-module-list-count">28</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/10/">十月 2016</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2016/11/28/java高级/ajax/">原生和jQuery的ajax</a>
        </li>
      
        <li>
          <a href="/2016/11/22/java基础/类加载器/">深入理解类加载器</a>
        </li>
      
        <li>
          <a href="/2016/11/21/java基础/jvm/">类加载的全过程</a>
        </li>
      
        <li>
          <a href="/2016/11/15/数据结构/统计二叉树的节点数/">统计完全二叉树的节点数</a>
        </li>
      
        <li>
          <a href="/2016/11/15/数据结构/完全二叉树/">判断二叉树是否为完全二叉树</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2016 QDU-scc<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
