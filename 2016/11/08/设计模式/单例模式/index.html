<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>设计模式读书笔记--单例模式 | Andone1cc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="有时候某些对象我们只需要一个，如：线程池、缓存、对话框等等，对于这类对象我们只能有一个实例，如果我们制造出多个实例，就会导致很多问题产生。
但是我们怎样才能保证一个类只有一个实例并且能够便于访问？这里我们想到了全局变量，全局变量确实是可以保证该类可以随时访问，但是它很难解决只有一个实例问题。最好的办法就是让该自身来负责保存它的唯一实例。这个类必须要保证没有其他类来创建它。这里我们可以将其构造方法私">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式读书笔记--单例模式">
<meta property="og:url" content="http://yoursite.com/2016/11/08/设计模式/单例模式/index.html">
<meta property="og:site_name" content="Andone1cc">
<meta property="og:description" content="有时候某些对象我们只需要一个，如：线程池、缓存、对话框等等，对于这类对象我们只能有一个实例，如果我们制造出多个实例，就会导致很多问题产生。
但是我们怎样才能保证一个类只有一个实例并且能够便于访问？这里我们想到了全局变量，全局变量确实是可以保证该类可以随时访问，但是它很难解决只有一个实例问题。最好的办法就是让该自身来负责保存它的唯一实例。这个类必须要保证没有其他类来创建它。这里我们可以将其构造方法私">
<meta property="og:image" content="http://img.blog.csdn.net/20130703214047953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2hlbnNzeQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20130703214240843?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2hlbnNzeQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2016-11-08T15:31:36.571Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="设计模式读书笔记--单例模式">
<meta name="twitter:description" content="有时候某些对象我们只需要一个，如：线程池、缓存、对话框等等，对于这类对象我们只能有一个实例，如果我们制造出多个实例，就会导致很多问题产生。
但是我们怎样才能保证一个类只有一个实例并且能够便于访问？这里我们想到了全局变量，全局变量确实是可以保证该类可以随时访问，但是它很难解决只有一个实例问题。最好的办法就是让该自身来负责保存它的唯一实例。这个类必须要保证没有其他类来创建它。这里我们可以将其构造方法私">
<meta name="twitter:image" content="http://img.blog.csdn.net/20130703214047953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2hlbnNzeQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
  
    <link rel="alternate" href="/atom.xml" title="Andone1cc" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">Andone1cc</h1>
  
    <p class="lead blog-description">一个有梦想的CS小白</p>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-设计模式/单例模式" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      设计模式读书笔记--单例模式
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2016/11/08/设计模式/单例模式/" class="article-date"><time datetime="2016-11-08T15:12:49.243Z" itemprop="datePublished">2016-11-08</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/设计模式/">设计模式</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>有时候某些对象我们只需要一个，如：线程池、缓存、对话框等等，对于这类对象我们只能有一个实例，如果我们制造出多个实例，就会导致很多问题产生。</p>
<p>但是我们怎样才能保证一个类只有一个实例并且能够便于访问？这里我们想到了全局变量，全局变量确实是可以保证该类可以随时访问，但是它很难解决只有一个实例问题。最好的办法就是让该自身来负责保存它的唯一实例。这个类必须要保证没有其他类来创建它。这里我们可以将其构造方法私有化。即</p>
<a id="more"></a>
<pre><code>`Public MyClass{  
     PrivateMyClass(){}  
}  `
</code></pre><p>含有私有化构造器的类就能保证它不能被其他类实例化了。但是我们如何来获取这个实例化类呢？提供一个方法用于返回该类的实例对象即可实现。</p>
<pre><code>`public class MyClass {  
    private MyClass(){  

    }  

    public static MyClass getInstance(){  
    return new MyClass();  
    }  
}  `
</code></pre><h3 id="一、基本定义"><a href="#一、基本定义" class="headerlink" title="一、基本定义"></a>一、基本定义</h3><p>通过上面简单介绍，我们可以对单例模式有一个简单的认识。所谓单例模式就是确保某一个类只有一个实例，并且提供一个全局访问点。</p>
<p>从上面可以看出单例模式有如下几个特点：</p>
<p>一、它只有一个实例。</p>
<p>二、它必须要自行实例化。</p>
<p>三、它必须自行向整个系统提供访问点。</p>
<h3 id="二、模式结构"><a href="#二、模式结构" class="headerlink" title="二、模式结构"></a>二、模式结构</h3><p><img src="http://img.blog.csdn.net/20130703214047953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2hlbnNzeQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>
<p>单例模式可以说是最简单的设计模式了，它仅有一个角色Singleton。</p>
<p><code>Singleton：单例。</code></p>
<h3 id="三、模式实现"><a href="#三、模式实现" class="headerlink" title="三、模式实现"></a>三、模式实现</h3><pre><code>`public class Singleton {  
    //利用静态变量来记录Singleton的唯一实例  
    private static Singleton uniqueInstance;  

    /* 
     * 构造器私有化，只有Singleton类内才可以调用构造器 
     */  
    private Singleton(){  

    }  

    public static Singleton getInstance(){  
        if(uniqueInstance == null){  
            uniqueInstance = new Singleton();  
        }  

        return uniqueInstance;  
    }  

}  `
</code></pre><p>在《Head  First》有这样一个场景，就是说有两个线程都要执行这段代码，很有可能会产生两个实例对象。如下图：</p>
<p><img src="http://img.blog.csdn.net/20130703214240843?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2hlbnNzeQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>
<p>这里有三种解决方案。</p>
<p>第一、 <code>使用synchronized来处理</code>。也就是说将getInstance()方法变成同步方法即可。</p>
<pre><code>`public class Singleton {  
    //利用静态变量来记录Singleton的唯一实例  
    private static Singleton uniqueInstance;  

    /* 
     * 构造器私有化，只有Singleton类内才可以调用构造器 
     */  
    private Singleton(){  

    }  

    public static synchronized Singleton getInstance(){  
        if(uniqueInstance == null){  
            uniqueInstance = new Singleton();  
        }  

        return uniqueInstance;  
    }  

}  `
</code></pre><p>第二、  <code>直接初始化静态变量。</code>这样就保证了线程安全。</p>
<pre><code>`public class Singleton {  
    /* 
     * 利用静态变量来记录Singleton的唯一实例 
     * 直接初始化静态变量，这样就可以确保线程安全了 
     */  
    private static Singleton uniqueInstance = new Singleton();  

    /* 
     * 构造器私有化，只有Singleton类内才可以调用构造器 
     */  
    private Singleton(){  

    }  

    public static Singleton getInstance(){  
        return uniqueInstance;  
    }  

}  `
</code></pre><p>第三、  <code>用“双重检查加锁”</code>，在getInstance()中减少使用同步。</p>
<pre><code>    `public class Singleton {  
    /* 
     * 利用静态变量来记录Singleton的唯一实例 
     * volatile 关键字确保：当uniqueInstance变量被初始化成Singleton实例时， 
     * 多个线程正确地处理uniqueInstance变量 
     *  
     */  
    private volatile static Singleton uniqueInstance;  

    /* 
     * 构造器私有化，只有Singleton类内才可以调用构造器 
     */  
    private Singleton(){  

    }  

    /* 
     *  
     * 检查实例，如果不存在，就进入同步区域 
     */  
    public static Singleton getInstance(){  
        if(uniqueInstance == null){  
            synchronized(Singleton.class){    //进入同步区域  
                if(uniqueInstance == null){     //在检查一次，如果为null，则创建  
                    uniqueInstance  = new Singleton();  
                }  
            }  
        }  

        return uniqueInstance;  
    }  

}  `
</code></pre><p><code>在这里是首先检查是否实例已经创建了，如果尚未创建，才会进行同步。这样一来。只有第一次会同步。</code></p>
<h3 id="四、模式优缺点"><a href="#四、模式优缺点" class="headerlink" title="四、模式优缺点"></a>四、模式优缺点</h3><p>【优点】</p>
<p>一、节约了系统资源。由于系统中只存在一个实例对象，对与一些需要频繁创建和销毁对象的系统而言，单<br>例模式无疑节约了系统资源和提高了系统的性能。</p>
<p>二、因为单例类封装了它的唯一实例，所以它可以严格控制客户怎样以及何时访问它。</p>
<p>【缺点】</p>
<p>一、由于单例模式中没有抽象层，因此单例类的扩展有很大的困难。</p>
<p>二、单例类的职责过重，在一定程度上违背了“单一职责原则”。</p>
<h3 id="五、模式使用场景"><a href="#五、模式使用场景" class="headerlink" title="五、模式使用场景"></a>五、模式使用场景</h3><p>下列几种情况可以使用单例模式。</p>
<p>一、系统只需要一个实例对象，如系统要求提供一个唯一的序列号生成器，或者需要考虑资源消耗太大而只允许创建一个对象。   </p>
<p>二、客户调用类的单个实例只允许使用一个公共访问点，除了该公共访问点，不能通过其他途径访问该实例。</p>
<h3 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h3><ol>
<li><p>单例模式中确保程序中一个类最多只有一个实例。</p>
</li>
<li><p>单例模式的构造器是私有了，而且它必须要提供实例的全局访问点。</p>
</li>
<li><p>单例模式可能会因为多线程的问题而带来安全隐患。</p>
</li>
</ol>
<p><br><br>【参考资料】</p>
<p>《大话设计模式》</p>
<p>《Head First》</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/08/设计模式/单例模式/" data-id="civi72yad001tlkn66dbehgus" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>


    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/2016/11/07/java基础/hashmap/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">深入剖析HashMap源码</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/2016/11/09/java高级/hibernate缓存/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">深入理解Hibernate缓存机制</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>


<section id="comments">
<!-- ��˵���ۿ� start -->
<div class="ds-thread" data-thread-key="post-设计模式/单例模式" data-title="设计模式读书笔记--单例模式" data-url="http://yoursite.com/2016/11/08/设计模式/单例模式/"></div>
<!-- ��˵���ۿ� end -->
<!-- ��˵����JS���� start (һ����ҳֻ������һ��) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:'andone1cc'};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- ��˵����JS���� end -->
</section>



        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p><em>青岛大学   计算机</em><br /> Algorithm JAVA C/C++ Python <br />有些事不是看到希望了才去坚持,而是坚持了才会看到希望..</p>

</div>


  
  <div class="sidebar-module">
    <h4>Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/Algorithm/">Algorithm</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/JAVA/">JAVA</a><span class="sidebar-module-list-count">13</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/java高级/">java高级</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/设计模式/">设计模式</a><span class="sidebar-module-list-count">2</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/SSH/">SSH</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/String/">String</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/java基础/">java基础</a><span class="sidebar-module-list-count">12</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/二叉树/">二叉树</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/设计模式/">设计模式</a><span class="sidebar-module-list-count">2</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/11/">十一月 2016</a><span class="sidebar-module-list-count">20</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/10/">十月 2016</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2016/11/14/设计模式/代理模式/">设计模式读书笔记--代理模式</a>
        </li>
      
        <li>
          <a href="/2016/11/13/java高级/关联映射N-N/">Hibernate的关联映射之N-N关联映射</a>
        </li>
      
        <li>
          <a href="/2016/11/12/java高级/创建bean/">Spring 通过多种模式(反射,工厂方法，Factory Bean)来配置bean</a>
        </li>
      
        <li>
          <a href="/2016/11/12/java高级/ioc原理/">解析Spring IOC原理——工厂模式与反射机制的综合应用</a>
        </li>
      
        <li>
          <a href="/2016/11/09/java高级/关联映射N-1/">Hibernate的关联映射之N-1关联映射</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2016 QDU-scc<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
